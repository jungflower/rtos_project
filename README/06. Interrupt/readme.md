# 6. μΈν„°λ½νΈ
`μΈν„°λ½νΈ`λ€?  
- CPUκ°€ ν”„λ΅κ·Έλ¨μ„ μμ°¨μ μΌλ΅ μ‹¤ν–‰ν•λ” λ„μ¤‘, κ°‘μ‘μ¤λ½κ² λ°μƒν• μ‚¬κ±΄(μ™Έλ¶€ μ‹ νΈ λ“±)μ„ μ¦‰μ‹ μ²λ¦¬ν•κΈ° μ„ν•΄ ν„μ¬ μ‹¤ν–‰ νλ¦„μ„ μ μ‹ μ¤‘λ‹¨μ‹ν‚¤κ³ , ν•΄λ‹Ή μ‚¬κ±΄ μ²λ¦¬ λ£¨ν‹΄μΌλ΅ μ μ–΄λ¥Ό λ„κΈ°λ” λ§¤μ»¤λ‹μ¦.  

μΈν„°λ½νΈ μ²λ¦¬λ¥Ό μ„ν•΄μ„λ” `μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬`λ¥Ό μ΄κΈ°ν™”ν•κ³  μ‚¬μ©ν•λ” μ½”λ“ μ‘μ„± ν•„μ” -> μ‹¤μ  μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¤λ” ν•λ“μ›¨μ–΄μ™€ μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬λ¥Ό μ—°κ²°  

π‘‰ **ARM κΈ°λ° MCUμ—μ„ μΈν„°λ½νΈ μ²λ¦¬ κ³Όμ •**  
`ν•λ“μ›¨μ–΄ β†’ μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬ β†’ CPU μμ™Έ λ°μƒ β†’ ν•Έλ“¤λ¬ μ‹¤ν–‰`  

1. ν•λ“μ›¨μ–΄ μ΄λ²¤νΈ λ°μƒ
- ν•΄λ‹Ή ν•λ“μ›¨μ–΄λ” μΈν„°λ½νΈ μ”μ²­ (IRQ μ‹ νΈ / FIQ μ‹ νΈ)μ„ μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬μ— μ „λ‹¬  

2. μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬ 
- μ—¬λ¬ μ¥μΉμ—μ„ μ¬λΌμ¨ μΈν„°λ½νΈλ¥Ό κ΄€λ¦¬  
- μ„ νƒλ μΈν„°λ½νΈλ¥Ό CPU(μ½”μ–΄)μ— μ „λ‹¬  

3. CPU (ARM μ½”μ–΄)  
- `CPSR` λ μ§€μ¤ν„°μ I(IRQ Mask), F(FIQ Mask) λΉ„νΈ μƒνƒ ν™•μΈ  
    - `I=0` -> IRQ  ν—μ©
    - `F=0` -> FIQ ν—μ©  
- ν—μ© μƒνƒλΌλ©΄ Exception λ°μƒμΌλ΅ κ°„μ£Όν•κ³  PCλ¥Ό ν•΄λ‹Ή Exception vectorλ΅ jump  

4. Exception Vector -> ν•Έλ“¤λ¬ μ‹¤ν–‰  
- ARMμ€ μΈν„°λ½νΈ μΆ…λ¥λ³„λ΅ κ³ μ •λ μ£Όμ†(μμ™Έ λ²΅ν„° ν…μ΄λΈ”)μ„ κ°–κ³  μμ  
- λ²΅ν„° μ£Όμ†μ— μ‘μ„±λ μµμ…‰μ… ν•Έλ“¤λ¬ μ½”λ“λ΅ μ μ–΄κ°€ μ΄λ™  
μ΄λ• CPUλ” μΌλ¶€ λ μ§€μ¤ν„°(PC, CPSR λ“±)μ„ μ¤νƒμ΄λ‚ μ „μ© λ¨λ“ λ μ§€μ¤ν„°μ— μ €μ¥  

5. μΈν„°λ½νΈ μ„λΉ„μ¤ λ£¨ν‹΄(ISR, ν•Έλ“¤λ¬)  
- νμ›¨μ–΄μ—μ„ μ‘μ„±ν•λ” λ¶€λ¶„  
    1. μ»¨ν…μ¤νΈ μ €μ¥(μΌλ¶€ λ μ§€μ¤ν„° ν‘Έμ‹)  
    2. μΈν„°λ½νΈ λ°μƒ μ›μΈ ν™•μΈ (UARTμ RT/TX μƒνƒ λ μ§€μ¤ν„° μ½κΈ°)  
    3. ν•΄λ‹Ή μ‘μ—… μ²λ¦¬ (λ°μ΄ν„° μ½κΈ°/μ“°κΈ°, ν”λκ·Έ ν΄λ¦¬μ–΄)  
    4. μ»¨ν…μ¤νΈ λ³µμ›  
    5. eretλ“±μΌλ΅ μ›λ μ½”λ“λ΅ λ³µκ·€

6. μ›λ μ‹¤ν–‰μ¤‘μ΄λ ν”„λ΅κ·Έλ¨ λ³µκ·€  
- ISR μν–‰ λλ‚λ©΄ μ €μ¥ν•΄λ‘μ—λ λ μ§€μ¤ν„° μƒνƒ λ³µμ›ν•κ³  μ¤‘λ‹¨ν–λ μ§€μ λ¶€ν„° μ •μƒ μ‹¤ν–‰μ„ μ΄μ–΄κ°.  

### 6.1 μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬  
- RealViewPBμ—μ„λ” μΈν„°λ½νΈ μ»¨νΈλ΅¤λ¬λ¥Ό `GIC(Generic Intterrupt Controller)`λΌ λ¶€λ¥Έλ‹¤.  

1. GIC λ μ§€μ¤ν„° κµ¬μ΅°μ²΄ λ§λ“¤κΈ°
